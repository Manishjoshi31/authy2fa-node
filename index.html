<!DOCTYPE html><html><head><title>Two-Factor Authentication with Authy</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Two-Factor Authentication with Authy"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Two-Factor Authentication with Authy</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Learn to implement two-factor authentication (2FA) in your web app with Twilio-powered Authy. 2FA helps further secure your users' data by validating more than just a password. This tutorial will show you the code to make it happen.</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-file="api/onetouch.js" data-highlight="" class="step"><h2 id="about-this-application">About this application</h2>
<p>This <a href="http://expressjs.com/">Express.js</a> sample application
demonstrates how to build a login system that uses two factors of authentication to login users.
Head to the <a href="https://github.com/TwilioDevEd/2fa-node">application&#39;s
README.md</a>
to see how to run the application locally.</p>
<p>Adding two-factor authentication (2FA) to your web application increases the
security of your user&#39;s data. <a href="http://en.wikipedia.org/wiki/Multi-factor_authentication">Multi-factor authentication</a>
determines the identity of a user by validating first by logging into the app,
and second by validating their mobile device.</p>
<p>For the second factor, we will validate that the user has their mobile phone by either:</p>
<ul>
<li>Sending them a OneTouch push notification to their mobile Authy app</li>
<li>Sending them a token through their mobile Authy app</li>
<li>Sending them a one-time token in a text message <a href="http://www.authy.com/">sent with Authy via Twilio</a>. Here&#39;s how this works at a high level:</li>
</ul>
<p><img src="//s3.amazonaws.com/howtodocs/2fa-high-level.png" alt="2FA High Level"></p>
<p>Let&#39;s get started! Click the right arrow above to move to the next step
  of the tutorial.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="http://expressjs.com/starter/hello-world.html">Getting started with Express.js</a></li>
<li><a href="https://github.com/evilpacket/node-authy">node-authy library</a></li>
</ul>
</div><div data-file="config.js" class="step"><h2 id="configuring-authy">Configuring Authy</h2>
<p>If you haven&#39;t done so already, now is the time to <a href="https://dashboard.authy.com/signup">sign up for Authy</a>.
Create your first application, naming it whatever you wish. After you create your application,
your &quot;production&quot; API key will be visible on your <a href="https://dashboard.authy.com">dashboard</a>:</p>
<p><img src="//s3.amazonaws.com/howtodocs/2fa-authy-dashboard.png" alt="Authy Dashboard"></p>
<p>Once we have an Authy API key, we store it in this initializer file.</p>
<p>Now that we&#39;ve configured our Express app, let&#39;s take a look at how we
register a user with Authy.</p>
</div><div data-file="models/User.js" data-highlight="64-77" class="step"><h2 id="registering-a-user-with-authy">Registering a User with Authy</h2>
<p>When a new User is created we also register the User with Authy.</p>
<p>All Authy needs to get a user set up for your application is its email,
phone number and country code. We need to make sure this information is
required when the user is signing up.</p>
<p>Once we register the User with Authy we get an <code>id</code> back that we will
store as the user&#39;s <code>authyId</code>. This is very important since it&#39;s how we
will verify the identity of our User with Authy.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//docs.authy.com/#section-Enabling_two-
factor_on_a_user">Enabling a User with Authy</a></li>
<li><a href="//mongoosejs.com/docs/guide.html">Getting started with Mongoose</a></li>
<li><a href="//mongoosejs.com/docs/middleware.html">Mongoose Middleware</a></li>
</ul>
</div><div data-file="api/sessions.js" data-highlight="7-44" class="step"><h2 id="logging-in-with-authy-onetouch">Logging in with Authy OneTouch</h2>
<p>When a User attempts to login to our website, a second form of identification
 will be needed. Let&#39;s take a look at Authy&#39;s OneTouch verification first.</p>
<p><img src="//howtodocs.s3.amazonaws.com/onetouch-approved.gif" alt="Authy OneTouch Approval"></p>
<p>OneTouch works like so:</p>
<ul>
<li>We attempt to send a User a <em>OneTouch Approval Request</em></li>
<li>If the User has OneTouch enabled, we will get a <code>success</code> message back</li>
<li>The User hits &#39;Approve&#39; in their Authy app</li>
<li>Authy makes a POST request to our app with an &#39;Approved&#39; status</li>
<li>We log the User in</li>
</ul>
<p>In the next steps we&#39;ll look at how we handle cases where the User does not
have OneTouch, or denies the login request.</p>
</div><div data-file="models/User.js" data-highlight="89-105" class="step"><h2 id="sending-the-onetouch-request">Sending the OneTouch Request</h2>
<p>When our User logs in we immediately attempt to verify their identity with
OneTouch. We will fallback gracefully if they don&#39;t have a OneTouch device,
but we don&#39;t know until we try.</p>
<p>Authy lets us pass details with our OneTouch request. These can be messages,
logos and any other details we want to send. We could easily send any
number of details by appending <code>details[&#39;some_detail&#39;]</code>. You could imagine a
scenario where we send a OneTouch request to approve a money transfer:</p>
<pre><code class="cm-s-monokai lang-js"><span class="cm-variable">details</span> <span class="cm-operator">=</span> {
  <span class="cm-property">message</span>: <span class="cm-string">&quot;Request to send money to Jarod&#39;s vault&quot;</span>,
  <span class="cm-property">from</span>: <span class="cm-string">&quot;Jarod&quot;</span>,
  <span class="cm-property">amount</span>: <span class="cm-string">&quot;1,000,000&quot;</span>,
  <span class="cm-property">currency</span>: <span class="cm-string">&quot;Galleons&quot;</span>
},
</code></pre>
<p><em>Note: We need some way to check the status of the user&#39;s two-factor process, in this case we do so by updating the <code>User.authyStatus</code> attribute. It&#39;s important we reset this before we log the user in.</em></p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//docs.authy.com/new_doc/authy_onetouch_api#create-an-approval-request-to-be-sent-to-user">Create Approval Requests with Authy</a></li>
<li><a href="//docs.authy.com/new_doc/authy_onetouch_api#getting-approval-request-info">Getting Approval Request info</a></li>
</ul>
</div><div data-file="api/sessions.js" data-highlight="57-70" class="step"><h2 id="configuring-the-onetouch-callback">Configuring the OneTouch callback</h2>
<p>In order for our app to know what the User did after we sent the OneTouch
request, we need to register a callback endpoint with Authy.</p>
<p><img src="//howtodocs.s3.amazonaws.com/onetouch-callback-endpoint.png" alt="Authy OneTouch Callback"></p>
<p>Here in our callback, we look up the user using the <code>authy_id</code> sent with the Authy POST request. Ideally at this point we would probably use a websocket to let our client know that we received a response from Authy. However for this version we&#39;re going to keep it simple and just update the <code>authyStatus</code> on the User. Then all our client-side code needs to do is check for <code>user.authyStatus.approved</code> before logging him/her in.</p>
<p>Let&#39;s take a look at the client-side code that will be handling this.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//mongoosejs.com/docs/queries.html">Mongoose findOne Query</a></li>
<li><a href="//github.com/expressjs/body-parser#bodyparserjsonoptions">Using BodyParser for JSON</a></li>
</ul>
</div><div data-file="public/app/views/Login.js" class="step"><h2 id="handling-two-factor-asyncronously">Handling Two-Factor Asyncronously</h2>
<p><em>Our user interface for this example is a <a href="http://en.wikipedia.org/wiki/Single-page_application">single page application</a> written using <a href="http://backbonejs.org/">Backbone</a> and <a href="http://jquery.com/">jQuery</a>.</em></p>
<p>We&#39;ve already taken a look at what&#39;s happening on the server side, so
let&#39;s step in front of the cameras now and see how our JavaScript is
interacting with those server endpoints.</p>
<p>First we hijack the login form submitted and pass the data to our
<code>/session</code> controller using Ajax. Depending on how that endpoint
responds we will either ask the User for a token or await their OneTouch
response.</p>
<p>If we expect a OneTouch response, we will begin polling <code>/authy/status</code>
until we either see OneTouch login was either approved or denied. Let&#39;s
take a look at this controller and see what is happening.</p>
<hr>
<p><strong>See Also:</strong></p>
<ul>
<li><a href="//api.jquery.com/jquery.post/">jQuery Post method</a></li>
</ul>
</div><div data-file="api/sessions.js" data-highlight="72-87" class="step"><h2 id="falling-back-to-token">Falling back to Token</h2>
<p>Here is the endpoint that our javascript is polling. It is waiting for the
user status to be either &#39;Approved&#39; or &#39;Denied&#39;. If the User has approved
the OneTouch request, we will save their session as <code>confirmed</code>, which
officially logs them in.</p>
<p>If the request was denied we render the <code>/verify</code> page and ask the User to log in with a Token.</p>
<p>Now let&#39;s take a look at how we handle two-factor with tokens.</p>
</div><div data-file="models/User.js" data-highlight="107-122" class="step"><h2 id="sending-a-2fa-token">Sending a 2FA Token</h2>
<p><img src="//s3.amazonaws.com/howtodocs/2fa-flow5.png" alt="2FA Flow Chart Step 5"></p>
<p>Once there is an Authy user ID associated with our user model, we can request that an SMS verification token be sent out to the user&#39;s phone. Authy supports token validation in their mobile app as well, so if our user has the app it will default to sending a push notification instead of an SMS.</p>
<p>We can call this method on the user instance multiple times if needed. This is what happens every time the user clicks &quot;Resend Code&quot; on the web form we will take a look at next.</p>
</div><div data-file="api/sessions.js" data-highlight="89-112" class="step"><h2 id="validating-the-code">Validating the Code</h2>
<p><img src="//s3.amazonaws.com/howtodocs/2fa-flow8.png" alt="2FA Flow Chart Step 8"></p>
<p>Our Express route handler, will grab the code submitted on the form in order to validate it. <a href="http://stephensugden.com/middleware_guide/">Connect middleware</a> function executes before this handler and adds a <code>user</code> property to the <code>request</code> object that contains a Mongoose model instance representing the user associated with this session. We use <code>verifyAuthyToken</code> on the <code>User</code> model to check if the code submitted by the user is legit.</p>
</div><div data-file="models/Session.js" class="step"><h2 id="where-to-next-">Where to next?</h2>
<p>That&#39;s it! We&#39;ve just implemented two-factor authentication using three different methods and the latest in Authy technology.</p>
<p>If you&#39;re a Node.js developer working with Twilio, you might want to
check out these other tutorials.</p>
<p><a href="//www.twilio.com/docs/howto/walkthrough/account-verification/node/express"><strong>Account Verification</strong></a></p>
<p>Increase the security of your login system by verifying a user&#39;s mobile
phone.</p>
<p><a href="//www.twilio.com/docs/howto/walkthrough/server-notifications/node/express"><strong>Server
Notifications via SMS</strong></a></p>
<p>Faster than e-mail and less likely to get blocked, text messages are great for timed alerts and notifications. Learn how to send out SMS (and MMS) notifications to a list of server administrators.</p>
<h3 id="did-this-help-">Did this help?</h3>
<p>Thanks for checking this tutorial out! If you have any feedback to share
with us, we&#39;d love to hear it. <a href="mailto:deved-oss@twilio.com">Contact the Twilio Developer Education Team</a> to let us know what you think.</p>
</div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="api/onetouch.js" data-mode="javascript">dmFyIGNvbmZpZyA9IHJlcXVpcmUoJy4uL2NvbmZpZycpOwp2YXIgcXVlcnlzdHJpbmcgPSByZXF1aXJlKCJxdWVyeXN0cmluZyIpOwovLyBDcmVhdGUgYXV0aGVudGljYXRlZCBBdXRoeSBBUEkgY2xpZW50CnZhciBhdXRoeSA9IHJlcXVpcmUoJ2F1dGh5JykoY29uZmlnLmF1dGh5QXBpS2V5KTsKCi8vIEV4dGVuZCB0aGUgQXV0aHkgbW9kdWxlIHRvIHNlbmRfYXBwcm92YWxfcmVxdWVzdApleHBvcnRzLnNlbmRfYXBwcm92YWxfcmVxdWVzdCA9IGZ1bmN0aW9uIChpZCxkZXRhaWxzLGNhbGxiYWNrKXsKICAgIHZhciB1cmw9Ii9vbmV0b3VjaC9qc29uL3VzZXJzLyIrcXVlcnlzdHJpbmcuZXNjYXBlKGlkKSsiL2FwcHJvdmFsX3JlcXVlc3RzIjsgICAKICAgIGF1dGh5Ll9yZXF1ZXN0KCJwb3N0IiwgIi9vbmV0b3VjaC9qc29uL3VzZXJzLyIrcXVlcnlzdHJpbmcuZXNjYXBlKGlkKSsiL2FwcHJvdmFsX3JlcXVlc3RzIiwgewogICAgICAgICJkZXRhaWxzW0VtYWlsIEFkZHJlc3NdIjogZGV0YWlscy5lbWFpbCwKICAgICAgICAibWVzc2FnZSI6ZGV0YWlscy5tZXNzYWdlCiAgICB9LCBjYWxsYmFjayk7Cn07</textarea>
<textarea class="saurus-file" data-file="config.js" data-mode="javascript">bW9kdWxlLmV4cG9ydHMgPSB7CiAgICAvLyBIVFRQIHBvcnQKICAgIHBvcnQ6IHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMCwKICAgIAogICAgLy8gUHJvZHVjdGlvbiBBdXRoeSBBUEkga2V5CiAgICBhdXRoeUFwaUtleTogcHJvY2Vzcy5lbnYuQVVUSFlfQVBJX0tFWSwKCiAgICAvLyBNb25nb0RCIGNvbm5lY3Rpb24gc3RyaW5nIC0gTU9OR09fVVJMIGlzIGZvciBsb2NhbCBkZXYsCiAgICAvLyBNT05HT0xBQl9VUkkgaXMgZm9yIHRoZSBNb25nb0xhYiBhZGQtb24gZm9yIEhlcm9rdSBkZXBsb3ltZW50CiAgICBtb25nb1VybDogcHJvY2Vzcy5lbnYuTU9OR09MQUJfVVJJIHx8IHByb2Nlc3MuZW52Lk1PTkdPX1VSTAp9Ow==</textarea>
<textarea class="saurus-file" data-file="models/User.js" data-mode="javascript">dmFyIG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTsKdmFyIGJjcnlwdCA9IHJlcXVpcmUoJ2JjcnlwdCcpOwp2YXIgY29uZmlnID0gcmVxdWlyZSgnLi4vY29uZmlnJyk7CnZhciBvbmV0b3VjaCA9IHJlcXVpcmUoJy4uL2FwaS9vbmV0b3VjaCcpOwoKLy8gQ3JlYXRlIGF1dGhlbnRpY2F0ZWQgQXV0aHkgQVBJIGNsaWVudAp2YXIgYXV0aHkgPSByZXF1aXJlKCdhdXRoeScpKGNvbmZpZy5hdXRoeUFwaUtleSk7CgovLyBVc2VkIHRvIGdlbmVyYXRlIHBhc3N3b3JkIGhhc2gKdmFyIFNBTFRfV09SS19GQUNUT1IgPSAxMDsKCi8vIERlZmluZSB1c2VyIG1vZGVsIHNjaGVtYQp2YXIgVXNlclNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoewogICAgZnVsbE5hbWU6IHsKICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBjb3VudHJ5Q29kZTogewogICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHBob25lOiB7CiAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgYXV0aHlJZDogU3RyaW5nLAogICAgZW1haWw6IHsKICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgdW5pcXVlOiB0cnVlCiAgICB9LAogICAgcGFzc3dvcmQ6IHsKICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBhdXRoeVN0YXR1czogewogICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICBkZWZhdWx0OiAndW52ZXJpZmllZCcKICAgIH0KfSk7CgovLyBNaWRkbGV3YXJlIGV4ZWN1dGVkIGJlZm9yZSBzYXZlIC0gaGFzaCB0aGUgdXNlcidzIHBhc3N3b3JkClVzZXJTY2hlbWEucHJlKCdzYXZlJywgZnVuY3Rpb24obmV4dCkgewogICAgdmFyIHNlbGYgPSB0aGlzOwoKICAgIC8vIG9ubHkgaGFzaCB0aGUgcGFzc3dvcmQgaWYgaXQgaGFzIGJlZW4gbW9kaWZpZWQgKG9yIGlzIG5ldykKICAgIGlmICghc2VsZi5pc01vZGlmaWVkKCdwYXNzd29yZCcpKSByZXR1cm4gbmV4dCgpOwoKICAgIC8vIGdlbmVyYXRlIGEgc2FsdAogICAgYmNyeXB0LmdlblNhbHQoU0FMVF9XT1JLX0ZBQ1RPUiwgZnVuY3Rpb24oZXJyLCBzYWx0KSB7CiAgICAgICAgaWYgKGVycikgcmV0dXJuIG5leHQoZXJyKTsKCiAgICAgICAgLy8gaGFzaCB0aGUgcGFzc3dvcmQgdXNpbmcgb3VyIG5ldyBzYWx0CiAgICAgICAgYmNyeXB0Lmhhc2goc2VsZi5wYXNzd29yZCwgc2FsdCwgZnVuY3Rpb24oZXJyLCBoYXNoKSB7CiAgICAgICAgICAgIGlmIChlcnIpIHJldHVybiBuZXh0KGVycik7CgogICAgICAgICAgICAvLyBvdmVycmlkZSB0aGUgY2xlYXJ0ZXh0IHBhc3N3b3JkIHdpdGggdGhlIGhhc2hlZCBvbmUKICAgICAgICAgICAgc2VsZi5wYXNzd29yZCA9IGhhc2g7CiAgICAgICAgICAgIG5leHQoKTsKICAgICAgICB9KTsKICAgIH0pOwoKICAgIGlmICghc2VsZi5hdXRoeUlkKSB7CiAgICAgICAgLy8gUmVnaXN0ZXIgdGhpcyB1c2VyIGlmIGl0J3MgYSBuZXcgdXNlcgogICAgICAgIGF1dGh5LnJlZ2lzdGVyX3VzZXIoc2VsZi5lbWFpbCwgc2VsZi5waG9uZSwgc2VsZi5jb3VudHJ5Q29kZSwgCiAgICAgICAgICAgIGZ1bmN0aW9uKGVyciwgcmVzcG9uc2UpIHsKICAgICAgICAgICAgaWYoZXJyKXsKICAgICAgICAgICAgICAgIHJlc3BvbnNlLmpzb24oZXJyKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBzZWxmLmF1dGh5SWQgPSByZXNwb25zZS51c2VyLmlkOwogICAgICAgICAgICBzZWxmLnNhdmUoZnVuY3Rpb24oZXJyLCBkb2MpIHsKICAgICAgICAgICAgICAgIGlmIChlcnIgfHwgIWRvYykgcmV0dXJuIG5leHQoZXJyKTsKICAgICAgICAgICAgICAgIHNlbGYgPSBkb2M7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgfTsKfSk7CgovLyBUZXN0IGNhbmRpZGF0ZSBwYXNzd29yZApVc2VyU2NoZW1hLm1ldGhvZHMuY29tcGFyZVBhc3N3b3JkID0gZnVuY3Rpb24oY2FuZGlkYXRlUGFzc3dvcmQsIGNiKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICBiY3J5cHQuY29tcGFyZShjYW5kaWRhdGVQYXNzd29yZCwgc2VsZi5wYXNzd29yZCwgZnVuY3Rpb24oZXJyLCBpc01hdGNoKSB7CiAgICAgICAgaWYgKGVycikgcmV0dXJuIGNiKGVycik7CiAgICAgICAgY2IobnVsbCwgaXNNYXRjaCk7CiAgICB9KTsKfTsKCi8vIFNlbmQgYSBPbmVUb3VjaCByZXF1ZXN0IHRvIHRoaXMgdXNlcgpVc2VyU2NoZW1hLm1ldGhvZHMuc2VuZE9uZVRvdWNoID0gZnVuY3Rpb24oY2IpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIHNlbGYuYXV0aHlTdGF0dXMgPSAndW52ZXJpZmllZCc7CiAgICBzZWxmLnNhdmUoKTsKCiAgICBvbmV0b3VjaC5zZW5kX2FwcHJvdmFsX3JlcXVlc3Qoc2VsZi5hdXRoeUlkLCB7CiAgICAgICAgbWVzc2FnZTogJ1JlcXVlc3QgdG8gTG9naW4gdG8gVHdpbGlvIGRlbW8gYXBwJywKICAgICAgICBlbWFpbDogc2VsZi5lbWFpbAogICAgfSwgZnVuY3Rpb24oZXJyLCBhdXRoeXJlcyl7CiAgICAgICAgaWYgKGVyciAmJiBlcnIuc3VjY2VzcyAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgYXV0aHlyZXMgPSBlcnI7CiAgICAgICAgICAgIGVyciA9IG51bGw7CiAgICAgICAgfQogICAgICAgIGNiLmNhbGwoc2VsZiwgZXJyLCBhdXRoeXJlcyk7CiAgICB9KTsKfTsKCi8vIFNlbmQgYSAyRkEgdG9rZW4gdG8gdGhpcyB1c2VyClVzZXJTY2hlbWEubWV0aG9kcy5zZW5kQXV0aHlUb2tlbiA9IGZ1bmN0aW9uKGNiKSB7CiAgICB2YXIgc2VsZiA9IHRoaXM7CgogICAgYXV0aHkucmVxdWVzdF9zbXMoc2VsZi5hdXRoeUlkLCBmdW5jdGlvbihlcnIsIHJlc3BvbnNlKSB7CiAgICAgICAgY2IuY2FsbChzZWxmLCBlcnIpOwogICAgfSk7Cn07CgovLyBUZXN0IGEgMkZBIHRva2VuClVzZXJTY2hlbWEubWV0aG9kcy52ZXJpZnlBdXRoeVRva2VuID0gZnVuY3Rpb24ob3RwLCBjYikgewogICAgdmFyIHNlbGYgPSB0aGlzOwogICAgYXV0aHkudmVyaWZ5KHNlbGYuYXV0aHlJZCwgb3RwLCBmdW5jdGlvbihlcnIsIHJlc3BvbnNlKSB7CiAgICAgICAgY2IuY2FsbChzZWxmLCBlcnIsIHJlc3BvbnNlKTsKICAgIH0pOwp9OwoKLy8gRXhwb3J0IHVzZXIgbW9kZWwKbW9kdWxlLmV4cG9ydHMgPSBtb25nb29zZS5tb2RlbCgnVXNlcicsIFVzZXJTY2hlbWEpOwo=</textarea>
<textarea class="saurus-file" data-file="api/sessions.js" data-mode="javascript">dmFyIFNlc3Npb24gPSByZXF1aXJlKCcuLi9tb2RlbHMvU2Vzc2lvbicpOwp2YXIgVXNlciA9IHJlcXVpcmUoJy4uL21vZGVscy9Vc2VyJyk7CnZhciBlcnJvciA9IHJlcXVpcmUoJy4vcmVzcG9uc2VfdXRpbHMnKS5lcnJvcjsKdmFyIG9rID0gcmVxdWlyZSgnLi9yZXNwb25zZV91dGlscycpLm9rOwoKLy8gQ3JlYXRlIGEgbmV3IHNlc3Npb24sIGZpcnN0IHRlc3RpbmcgdXNlcm5hbWUvcGFzc3dvcmQgY29tYm8KZXhwb3J0cy5jcmVhdGUgPSBmdW5jdGlvbihyZXF1ZXN0LCByZXNwb25zZSkgewogICAgdmFyIGVtYWlsID0gcmVxdWVzdC5ib2R5LmVtYWlsOwogICAgdmFyIGNhbmRpZGF0ZVBhc3N3b3JkID0gcmVxdWVzdC5ib2R5LnBhc3N3b3JkOwoKICAgIC8vIExvb2sgZm9yIGEgdXNlciBieSB0aGUgZ2l2ZW4gdXNlcm5hbWUKICAgIFVzZXIuZmluZE9uZSh7CiAgICAgICAgZW1haWw6IGVtYWlsCiAgICB9LCBmdW5jdGlvbihlcnIsIHVzZXIpIHsKICAgICAgICBpZiAoZXJyIHx8ICF1c2VyKSByZXR1cm4gaW52YWxpZCgpOwoKICAgICAgICAvLyBXZSBoYXZlIGEgdXNlciBmb3IgdGhhdCB1c2VybmFtZSwgdGVzdCBwYXNzd29yZAogICAgICAgIHVzZXIuY29tcGFyZVBhc3N3b3JkKGNhbmRpZGF0ZVBhc3N3b3JkLCBmdW5jdGlvbihlcnIsIG1hdGNoKSB7CiAgICAgICAgICAgIGlmIChlcnIgfHwgIW1hdGNoKSByZXR1cm4gaW52YWxpZCgpOwogICAgICAgICAgICByZXR1cm4gdmFsaWQodXNlcik7CiAgICAgICAgfSk7CiAgICB9KTsKCiAgICAvLyByZXNwb25kIHdpdGggYSA0MDMgZm9yIGEgbG9naW4gZXJyb3IKICAgIGZ1bmN0aW9uIGludmFsaWQoKSB7CiAgICAgICAgZXJyb3IocmVzcG9uc2UsIDQwMywgJ0ludmFsaWQgdXNlcm5hbWUvcGFzc3dvcmQgY29tYmluYXRpb24uJyk7CiAgICB9CgogICAgLy8gcmVzcG9uZCB3aXRoIGEgbmV3IHNlc3Npb24gZm9yIGEgdmFsaWQgcGFzc3dvcmQsIGFuZCBzZW5kIGEgT25lVG91Y2ggcmVxdWVzdAogICAgZnVuY3Rpb24gdmFsaWQodXNlcikgewogICAgICAgIFNlc3Npb24uY3JlYXRlU2Vzc2lvbkZvclVzZXIodXNlciwgZmFsc2UsIGZ1bmN0aW9uKGVyciwgc2VzcywgYXV0aHlSZXNwb25zZSkgewogICAgICAgICAgICBpZiAoZXJyIHx8ICFzZXNzKSB7CiAgICAgICAgICAgICAgICBlcnJvcihyZXNwb25zZSwgNTAwLCAKICAgICAgICAgICAgICAgICAgICAnRXJyb3IgY3JlYXRpbmcgc2Vzc2lvbiAtIHBsZWFzZSBsb2cgaW4gYWdhaW4uJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBTZW5kIHRoZSB1bmlxdWUgdG9rZW4gZm9yIHRoaXMgc2Vzc2lvbiBhbmQgdGhlIG9uZXRvdWNoIHJlc3BvbnNlCiAgICAgICAgICAgICAgICByZXNwb25zZS5zZW5kKHsKICAgICAgICAgICAgICAgICAgICB0b2tlbjogc2Vzcy50b2tlbiwKICAgICAgICAgICAgICAgICAgICBhdXRoeVJlc3BvbnNlOiBhdXRoeVJlc3BvbnNlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQp9OwoKLy8gRGVzdHJveSB0aGUgZ2l2ZW4gc2Vzc2lvbiAobG9nIG91dCkKZXhwb3J0cy5kZXN0cm95ID0gZnVuY3Rpb24ocmVxdWVzdCwgcmVzcG9uc2UpIHsKICAgIHJlcXVlc3Quc2Vzc2lvbiAmJiByZXF1ZXN0LnNlc3Npb24ucmVtb3ZlKGZ1bmN0aW9uKGVyciwgZG9jKSB7CiAgICAgICAgaWYgKGVycikgewogICAgICAgICAgICBlcnJvcihyZXNwb25zZSwgNTAwLCAnVGhlcmUgd2FzIGEgcHJvYmxlbSBsb2dnaW5nIHlvdSBvdXQgLSBwbGVhc2UgcmV0cnkuJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgb2socmVzcG9uc2UpOwogICAgICAgIH0KICAgIH0pOwp9OwoKLy8gUHVibGljIHdlYmhvb2sgZm9yIEF1dGh5IHRvIFBPU1QgdG8KZXhwb3J0cy5hdXRoeUNhbGxiYWNrID0gZnVuY3Rpb24ocmVxdWVzdCwgcmVzcG9uc2UpIHsKICAgIHZhciBhdXRoeUlkID0gcmVxdWVzdC5ib2R5LmF1dGh5X2lkOwoKICAgIC8vIExvb2sgZm9yIGEgdXNlciB3aXRoIHRoZSBhdXRoeV9pZCBzdXBwbGllcwogICAgVXNlci5maW5kT25lKHsKICAgICAgICBhdXRoeUlkOiBhdXRoeUlkCiAgICB9LCBmdW5jdGlvbihlcnIsIHVzZXIpIHsKICAgICAgICBpZiAoZXJyIHx8ICF1c2VyKSByZXR1cm4gaW52YWxpZCgpOwogICAgICAgIHVzZXIuYXV0aHlTdGF0dXMgPSByZXF1ZXN0LmJvZHkuc3RhdHVzOwogICAgICAgIHVzZXIuc2F2ZSgpOwogICAgfSk7CiAgICByZXNwb25zZS5lbmQoKTsKfTsKCi8vIEludGVybmFsIGVuZHBvaW50IGZvciBjaGVja2luZyB0aGUgc3RhdHVzIG9mIE9uZVRvdWNoCmV4cG9ydHMuYXV0aHlTdGF0dXMgPSBmdW5jdGlvbihyZXF1ZXN0LCByZXNwb25zZSkgewogICAgdmFyIHN0YXR1cyA9IChyZXF1ZXN0LnVzZXIpID8gcmVxdWVzdC51c2VyLmF1dGh5U3RhdHVzIDogJ3VudmVyaWZpZWQnOwogICAgaWYgKHN0YXR1cyA9PSAnYXBwcm92ZWQnKSB7CiAgICAgICAgcmVxdWVzdC5zZXNzaW9uLmNvbmZpcm1lZCA9IHRydWU7CiAgICAgICAgcmVxdWVzdC5zZXNzaW9uLnNhdmUoZnVuY3Rpb24oZXJyKSB7CiAgICAgICAgICAgIGlmIChlcnIpIHJldHVybiBlcnJvcihyZXNwb25zZSwgNTAwLCAKICAgICAgICAgICAgICAgICdUaGVyZSB3YXMgYW4gZXJyb3IgdmFsaWRhdGluZyB5b3VyIHNlc3Npb24uJyk7CiAgICAgICAgfSk7CiAgICB9CiAgICBpZiAoIXJlcXVlc3Quc2Vzc2lvbikgewogICAgICAgIHJldHVybiBlcnJvcihyZXNwb25zZSwgNDA0LCAnTm8gdmFsaWQgc2Vzc2lvbiBmb3VuZCBmb3IgdGhpcyB1c2VyLicpOwogICAgfSBlbHNlIHsKICAgICAgICByZXNwb25zZS5zZW5kKHsgc3RhdHVzOiBzdGF0dXMgfSk7CiAgICB9ICAgCn07CgovLyBWYWxpZGF0ZSBhIDJGQSB0b2tlbiAKZXhwb3J0cy52ZXJpZnkgPSBmdW5jdGlvbihyZXF1ZXN0LCByZXNwb25zZSkgewogICAgdmFyIG9uZVRpbWVDb2RlID0gcmVxdWVzdC5ib2R5LmNvZGU7CgogICAgaWYgKCFyZXF1ZXN0LnNlc3Npb24gfHwgIXJlcXVlc3QudXNlcikgewogICAgICAgIHJldHVybiBlcnJvcihyZXNwb25zZSwgNDA0LCAnTm8gdmFsaWQgc2Vzc2lvbiBmb3VuZCBmb3IgdGhpcyB0b2tlbi4nKTsKICAgIH0KCiAgICAvLyB2ZXJpZnkgZW50ZXJlZCBhdXRoeSBjb2RlCiAgICByZXF1ZXN0LnVzZXIudmVyaWZ5QXV0aHlUb2tlbihvbmVUaW1lQ29kZSwgZnVuY3Rpb24oZXJyKSB7CiAgICAgICAgaWYgKGVycikgcmV0dXJuIGVycm9yKHJlc3BvbnNlLCA0MDEsICdJbnZhbGlkIGNvbmZpcm1hdGlvbiBjb2RlLicpOwoKICAgICAgICAvLyBvdGhlcndpc2Ugd2UncmUgZ29vZCEgVmFsaWRhdGUgdGhlIHNlc3Npb24KICAgICAgICByZXF1ZXN0LnNlc3Npb24uY29uZmlybWVkID0gdHJ1ZTsKICAgICAgICByZXF1ZXN0LnNlc3Npb24uc2F2ZShmdW5jdGlvbihlcnIpIHsKICAgICAgICAgICAgaWYgKGVycikgcmV0dXJuIGVycm9yKHJlc3BvbnNlLCA1MDAsIAogICAgICAgICAgICAgICAgJ1RoZXJlIHdhcyBhbiBlcnJvciB2YWxpZGF0aW5nIHlvdXIgc2Vzc2lvbi4nKTsKCiAgICAgICAgICAgIHJlc3BvbnNlLnNlbmQoewogICAgICAgICAgICAgICAgdG9rZW46IHJlcXVlc3Quc2Vzc2lvbi50b2tlbgogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0pOwp9OwoKLy8gUmVzZW5kIHZhbGlkYXRpb24gY29kZQpleHBvcnRzLnJlc2VuZCA9IGZ1bmN0aW9uKHJlcXVlc3QsIHJlc3BvbnNlKSB7CiAgICBpZiAoIXJlcXVlc3QudXNlcikgcmV0dXJuIGVycm9yKHJlc3BvbnNlLCA0MDQsIAogICAgICAgICdObyB1c2VyIGZvdW5kIGZvciB0aGlzIHNlc3Npb24sIHBsZWFzZSBsb2cgaW4gYWdhaW4uJyk7CgogICAgLy8gT3RoZXJ3aXNlIHJlc2VuZCB0aGUgY29kZQogICAgcmVxdWVzdC51c2VyLnNlbmRBdXRoeVRva2VuKGZ1bmN0aW9uKGVycikgewogICAgICAgIGlmICghcmVxdWVzdC51c2VyKSByZXR1cm4gZXJyb3IocmVzcG9uc2UsIDUwMCwgCiAgICAgICAgICAgICdObyB1c2VyIGZvdW5kIGZvciB0aGlzIHNlc3Npb24sIHBsZWFzZSBsb2cgaW4gYWdhaW4uJyk7CgogICAgICAgIG9rKHJlc3BvbnNlKTsKICAgIH0pOwp9Ow==</textarea>
<textarea class="saurus-file" data-file="public/app/views/Login.js" data-mode="javascript">KGZ1bmN0aW9uKCkgewogICAgYXBwLnZpZXdzLkxvZ2luVmlldyA9IGFwcC52aWV3cy5CYXNlVmlldy5leHRlbmQoewogICAgICAgIC8vIG5hbWUgb2YgdGhlIHRlbXBsYXRlIGZpbGUgdG8gbG9hZCBmcm9tIHRoZSBzZXJ2ZXIKICAgICAgICB0ZW1wbGF0ZU5hbWU6ICdsb2dpbicsCgogICAgICAgIC8vIFVJIGV2ZW50cwogICAgICAgIGV2ZW50czogewogICAgICAgICAgICAnc3VibWl0ICNsb2dpbkZvcm0nOiAnbG9naW4nCiAgICAgICAgfSwKCiAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgICAgICAgLy8gZGVmYXVsdCBiZWhhdmlvciwgcmVuZGVyIHBhZ2UgaW50byAjcGFnZSBzZWN0aW9uCiAgICAgICAgICAgIGFwcC5yb3V0ZXIub24oJ3JvdXRlOmxvZ2luJywgZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBzZWxmLnJlbmRlcigpOwogICAgICAgICAgICB9KTsKICAgICAgICB9LAoKICAgICAgICAvLyBIaXQgbG9naW4gc2VydmljZQogICAgICAgIGxvZ2luOiBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpczsKCiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgYXBwLnNldCgnbWVzc2FnZScsIG51bGwpOwogICAgICAgICAgICAkLmFqYXgoJy9zZXNzaW9uJywgewogICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHNlbGYuJCgnI2VtYWlsJykudmFsKCksCiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHNlbGYuJCgnI3Bhc3N3b3JkJykudmFsKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgICAgICAvLyBJZiBzZXNzaW9uIHJldHVybnMgb25lVG91Y2ggc3RhdHVzLnN1Y2Nlc3Mgd2FpdCBmb3Igb25lU3RhdHVzIGFwcHJvdmFsCiAgICAgICAgICAgICAgICBhcHAuc2V0KCd0b2tlbicsIGRhdGEudG9rZW4pOwogICAgICAgICAgICAgICAgaWYgKGRhdGEuYXV0aHlSZXNwb25zZS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgYXBwLnNldCgnb25ldG91Y2gnLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICBhcHAuc2V0KCdtZXNzYWdlJywgewogICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdBd2FpdGluZyBPbmUgVG91Y2ggYXBwcm92YWwuJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIHNlbGYuY2hlY2tPbmVUb3VjaFN0YXR1cygpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBhcHAucm91dGVyLm5hdmlnYXRlKCd2ZXJpZnknLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IHRydWUKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbihlcnIpIHsKICAgICAgICAgICAgICAgIGFwcC5zZXQoJ21lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyLnJlc3BvbnNlSlNPTi5tZXNzYWdlIHx8CiAgICAgICAgICAgICAgICAgICAgICAgICdTb3JyeSwgYW4gZXJyb3Igb2NjdXJyZWQsIHBsZWFzZSBsb2cgaW4gYWdhaW4uJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCgogICAgICAgIGNoZWNrT25lVG91Y2hTdGF0dXM6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICAgICQuYWpheCgnL2F1dGh5L3N0YXR1cycsIHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgJ1gtQVBJLVRPS0VOJzogYXBwLmdldCgndG9rZW4nKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PSAnYXBwcm92ZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgYXBwLnJvdXRlci5uYXZpZ2F0ZSgndXNlcicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnN0YXR1cyA9PSAnZGVuaWVkJykgewogICAgICAgICAgICAgICAgICAgIGFwcC5yb3V0ZXIubmF2aWdhdGUoJ3ZlcmlmeScsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGFwcC5zZXQoJ21lc3NhZ2UnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnT25lVG91Y2ggTG9naW4gcmVxdWVzdCBkZW5pZWQuJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHNlbGYuY2hlY2tPbmVUb3VjaFN0YXR1cygpLCAzMDAwKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSk7Cn0pKCk7</textarea>
<textarea class="saurus-file" data-file="models/Session.js" data-mode="javascript">dmFyIG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTsKdmFyIHV1aWQgPSByZXF1aXJlKCdub2RlLXV1aWQnKTsKdmFyIFVzZXIgPSByZXF1aXJlKCcuL1VzZXInKTsKCi8vIERlZmluZSBzZXNzaW9uIG1vZGVsIHNjaGVtYQp2YXIgU2Vzc2lvblNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoewogICAgdXNlcklkOiB7CiAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgdG9rZW46IHsKICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgdW5pcXVlOiB0cnVlCiAgICB9LAogICAgY29uZmlybWVkOiB7CiAgICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQp9KTsKCi8vIENyZWF0ZSBhIHNlc3Npb24gZm9yIHRoZSBnaXZlbiB1c2VyClNlc3Npb25TY2hlbWEuc3RhdGljcy5jcmVhdGVTZXNzaW9uRm9yVXNlciA9IGZ1bmN0aW9uKHVzZXIsIGNvbmYsIGNiKSB7CiAgICB2YXIgbmV3U2Vzc2lvbiA9IG5ldyBTZXNzaW9uKHsKICAgICAgICB1c2VySWQ6IHVzZXIuX2lkLAogICAgICAgIGNvbmZpcm1lZDogY29uZiwKICAgICAgICB0b2tlbjogdXVpZC52MSgpCiAgICB9KTsKICAgIC8vIHdlIG5lZWQgdG8gZG8gdGhlIDJGQSBzdGVwIGZpcnN0CiAgICBpZiAoIWNvbmYpIHsKICAgICAgICB1c2VyLnNlbmRPbmVUb3VjaChmdW5jdGlvbihlcnIsIGF1dGh5UmVzcG9uc2UpIHsKICAgICAgICAgICAgaWYgKGVycikgcmV0dXJuIGNiLmNhbGwobmV3U2Vzc2lvbiwgZXJyKTsKICAgICAgICAgICAgc2F2ZShhdXRoeVJlc3BvbnNlKTsKICAgICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgICAgLy8gaWYgaXQncyBwcmUtY29uZmlybWVkIGp1c3Qgc2F2ZSB0aGUgc2Vzc2lvbgogICAgICAgIHNhdmUoKTsKICAgIH0KCiAgICAvLyBTYXZlIHRoZSBzZXNzaW9uIG9iamVjdAogICAgZnVuY3Rpb24gc2F2ZShhdXRoeVJlc3BvbnNlKSB7CiAgICAgICAgbmV3U2Vzc2lvbi5zYXZlKGZ1bmN0aW9uKGVyciwgZG9jKSB7CiAgICAgICAgICAgIGNiLmNhbGwobmV3U2Vzc2lvbiwgZXJyLCBkb2MsIGF1dGh5UmVzcG9uc2UpOwogICAgICAgIH0pOwogICAgfQp9OwoKLy8gR2V0IGEgdXNlciBtb2RlbCBmb3IgdGhpcyBzZXNzaW9uClNlc3Npb25TY2hlbWEubWV0aG9kcy5nZXRVc2VyID0gZnVuY3Rpb24oY2IpIHsKICAgIHZhciBzZWxmID0gdGhpczsKICAgIFVzZXIuZmluZEJ5SWQoc2VsZi51c2VySWQsIGNiKTsKfTsKCi8vIEV4cG9ydCB1c2VyIG1vZGVsCnZhciBTZXNzaW9uID0gbW9uZ29vc2UubW9kZWwoJ1Nlc3Npb24nLCBTZXNzaW9uU2NoZW1hKTsKbW9kdWxlLmV4cG9ydHMgPSBTZXNzaW9uOwo=</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><a href="https://github.com/TwilioDevEd/authy2fa-node" target="_blank" class="explorer-get-code"> <i class="fa fa-lg fa-github-square"> </i>View Code on GitHub</a></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="viewsaurus.js"></script></body></html>